(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],Array(38).concat([function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(29),s=n(8),o=(n(38),n(4)),i=n(1),a=n(3),r=(n(39),n(10)),j=n(5),u=n(0),l=Object(i.createContext)();function d(e){var t=e.children,n=e.setLoading,c=Object(i.useState)([]),s=Object(o.a)(c,2),d=s[0],b=s[1],m=Object(i.useState)({}),O=Object(o.a)(m,2),f=O[0],h=O[1],p=Object(i.useState)(!1),x=Object(o.a)(p,2),v=x[0],g=x[1],C=Object(i.useState)(null),N=Object(o.a)(C,2),k=N[0],y=N[1],A=Object(a.n)();Object(i.useEffect)((function(){fetch("/me").then((function(e){e.ok?e.json().then((function(e){P(e),h(e),y(e.image),n(!1)})):n(!1)}))}),[n,h]),Object(i.useEffect)((function(){v&&fetch("/users").then((function(e){e.ok&&e.json().then((function(e){b(e),n(!1)}))}))}),[v,n]);var P=function(e){h(e),g(!0),y(e.image)};return Object(u.jsx)(l.Provider,{value:{loggedIn:v,currentUser:Object(j.a)(Object(j.a)({},f),{},{image:k}),setCurrentUser:h,users:d,setUsers:b,login:P,logout:function(){h(null),g(!1),A("/")},addUser:function(e){b([].concat(Object(r.a)(d),[e]))},updateUserAddPost:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{posts:[].concat(Object(r.a)(t.posts),[e])})}))},updateUserEditPost:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{posts:t.posts.map((function(t){return t.id===e.id?e:t}))})}))},updateUserRemovePost:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e}))})}))},updateUserLikesCount:function(e,t){h((function(n){return Object(j.a)(Object(j.a)({},n),{},{posts:n.posts.map((function(n){return n.id===e?Object(j.a)(Object(j.a)({},n),{},{likes_count:t,liked:!0}):n}))})}))},updateUserUnlikesCount:function(e,t){h((function(n){return Object(j.a)(Object(j.a)({},n),{},{posts:n.posts.map((function(n){return n.id===e?Object(j.a)(Object(j.a)({},n),{},{likes_count:t,liked:!1}):n}))})}))},updateUserProfilePicture:function(e){y(e),h((function(t){return Object(j.a)(Object(j.a)({},t),{},{image:e})}))},userImage:k,updateBio:function(e){console.log(e),h((function(t){return Object(j.a)(Object(j.a)({},t),{},{bio:e})}))}},children:t})}n(41);var b=n.p+"static/media/logo.75731c5d.png",m=(n(42),function(){return Object(u.jsx)("div",{className:"loading-spinner-container",children:Object(u.jsx)("div",{className:"loading-spinner"})})}),O=function(){var e=Object(i.useContext)(l),t=e.loggedIn,n=e.logout,c=e.setCurrentUser,o=e.loading,r=Object(a.n)(),j=function(){n(),c(null),r("/")};return Object(u.jsxs)("div",{className:"navbar-container",children:[Object(u.jsx)("nav",{children:Object(u.jsx)(s.b,{to:"/",children:Object(u.jsx)("img",{src:b,alt:"MedX logo"})})}),Object(u.jsxs)("nav",{className:"nav-links",children:[Object(u.jsx)("ul",{children:t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"/posts",children:"Explore"})}),Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"/posts/new",children:"Create Post"})}),Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"/me",children:"Profile"})}),Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"#",children:Object(u.jsx)("button",{className:"small-button",onClick:j,children:"Logout"})})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{children:Object(u.jsxs)(s.b,{to:"/",className:"nav-link",children:[Object(u.jsx)("i",{className:"fas fa-home"})," Home"]})}),Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"/signup",children:"Signup"})}),Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"/login",children:"Login"})})]})}),o&&Object(u.jsxs)("div",{className:"profile-picture-placeholder",children:[Object(u.jsx)(m,{})," "]})]})]})},f=Object(i.createContext)([]),h=function(e){var t=e.children,n=Object(i.useState)(!0),c=Object(o.a)(n,2),s=c[0],a=c[1],d=Object(i.useState)([]),b=Object(o.a)(d,2),m=b[0],O=b[1],h=Object(i.useContext)(l),p=h.updateUserLikesCount,x=h.updateUserUnlikesCount;Object(i.useEffect)((function(){fetch("/posts").then((function(e){e.ok&&e.json().then((function(e){O(e),a(!1)}))}))}),[]);return Object(u.jsx)(f.Provider,{value:{posts:m,setPosts:O,addPost:function(e){O([e].concat(Object(r.a)(m)))},editPost:function(e){var t=m&&m.map((function(t){return t.id===e.id?e:t}));O(t)},deletePost:function(e){var t=m&&m.filter((function(t){return t.id!==e}));O(t)},addComment:function(e){var t=m&&m.map((function(t){return t.id===e.post.id?Object(j.a)(Object(j.a)({},t),{},{comments:[e].concat(Object(r.a)(t.comments))}):t}));O(t)},editComment:function(e){var t=m&&m.map((function(t){return t.id===e.post.id?Object(j.a)(Object(j.a)({},t),{},{comments:t&&t.comments.map((function(t){return t.id===e.id?e:t}))}):t}));O(t)},deleteComment:function(e,t){var n=m&&m.map((function(n){return n.id===t?Object(j.a)(Object(j.a)({},n),{},{comments:n&&n.comments.filter((function(t){return t.id!==e}))}):n}));O(n)},updatePostLikesCount:function(e,t,n){O((function(c){return c.map((function(c){return c&&c.id===e?Object(j.a)(Object(j.a)({},c),{},{likes_count:t,likes:[].concat(Object(r.a)(c.likes),[{user:{username:n}}])}):c}))})),p(e,t)},updatePostUnlikesCount:function(e,t,n){O((function(c){return c.map((function(c){if(c&&c.id===e){var s=c.likes&&c.likes.filter((function(e){var t;return e&&(null===(t=e.user)||void 0===t?void 0:t.username)!==n}));return Object(j.a)(Object(j.a)({},c),{},{likes_count:t,likes:s||[]})}return c}))})),x(e,t)},updateUserPostProfilePicture:function(e,t){O((function(n){return n.map((function(n){return n.user.id===t.id?Object(j.a)(Object(j.a)({},n),{},{user:Object(j.a)(Object(j.a)({},n.user),{},{image:e})}):n}))}))},loadingPosts:s},children:t})},p=function(e){var t=e.username,n=function(e){var t=new Date,n=new Date(e),c=Math.abs(t-n),s=Math.floor(c/1e3),o=Math.floor(s/60),i=Math.floor(o/60),a=Math.floor(i/24);return a>0?"".concat(a," ").concat(1===a?"day":"days"," ago"):i>0?"".concat(i," ").concat(1===i?"hour":"hours"," ago"):o>0?"".concat(o," ").concat(1===o?"minute":"minutes"," ago"):"".concat(s," ").concat(1===s?"second":"seconds"," ago")}(e.createdAt);return Object(u.jsxs)("div",{className:"post-card-meta",children:[Object(u.jsxs)("span",{children:["Posted by u/",t]}),"  ",Object(u.jsx)("span",{children:n})]})},x=(n(43),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQwAAAEMBuP1yoAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADuSURBVDiNpdOtTkNBEAXgb9qbgCiW9DUQGH4EBN6CEBIElXVINAKBoo5KZDUPAK8AKN4BAooMZm9yIb3tDZxkxM6ec3J2JhuZ6T+oICLOcYS1jro3TDPzCnYxwyAzdSkMimarh33MMvO9a+zCneGwQjQvI2KEUYv2OjNvm/RqDmmKuxaDz9+NeQYjjFsMLnGzzGBSUvw5wYkFM0BzBip8oVc3MnNSUixDr2ht4h5D9Bu77mO1pYZFs1GTz/CMcTnv4WlBPeI0M0X9FyJijBWsYxvHmfnS5R1NXOADO13E/NzCKw4y86GLsEb89zt/A5uEdee10aPNAAAAAElFTkSuQmCC"),v=function(e){var t=e.post,n=Object(i.useContext)(l),c=n.currentUser,s=n.loggedIn,r=n.updateUserRemovePost,j=Object(i.useContext)(f).deletePost,d=t.id,b=t.title,O=t.user,h=t.content,v=t.created_at,g=Object(i.useState)(!1),C=Object(o.a)(g,2),N=C[0],k=C[1],y=Object(i.useRef)(null),A=Object(a.n)(),P=t.comments.length,S=1===P?"comment":"comments";Object(i.useEffect)((function(){var e=function(e){y.current&&!y.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]);return null!==O&&void 0!==O&&O.username?Object(u.jsxs)("div",{className:"post-card ".concat(N?"menu-visible":""),children:[Object(u.jsx)("div",{onClick:function(){A(s?"/posts/".concat(d):"/login")},children:Object(u.jsx)("h2",{className:"hover-underline-animation",children:b})}),Object(u.jsx)(p,{username:O.username,createdAt:v}),Object(u.jsx)("p",{className:"post-card-content",children:h}),Object(u.jsxs)("div",{className:"comment-count-container",children:[Object(u.jsx)("img",{src:x,alt:"Comment Icon",className:"comment-icon"})," ",P," ",S]}),c&&c.id===t.user.id&&Object(u.jsxs)("div",{className:"post-card-actions",children:[Object(u.jsxs)("button",{className:"kebab-icon",onClick:function(){k(!N)},children:[Object(u.jsx)("i",{className:"fas fa-bars"})," "]}),Object(u.jsxs)("div",{className:"menu-options ".concat(N?"visible":""),ref:y,children:[Object(u.jsx)("button",{onClick:function(){A("/posts/".concat(t.id,"/edit"))},children:"Edit"}),Object(u.jsx)("button",{onClick:function(){fetch("/posts/".concat(t.id),{method:"DELETE"}),j(t.id),r(t.id)},children:"Delete"})]})]})]}):Object(u.jsx)(m,{})},g=Object(i.createContext)({}),C=function(e){var t=e.children,n=Object(i.useState)([]),c=Object(o.a)(n,2),s=c[0],a=c[1];return Object(u.jsx)(g.Provider,{value:{errors:s,setErrors:a},children:t})},N=(n(44),function(){var e=Object(i.useContext)(f).posts,t=Object(i.useContext)(g).setErrors;Object(i.useEffect)((function(){t([])}),[t]);var n=e.map((function(e){return Object(u.jsx)(v,{post:e},e.id)}));return Object(u.jsxs)("div",{className:"home-container",children:[Object(u.jsx)("h2",{children:"Welcome to MedX"}),Object(u.jsx)("p",{children:"Explore health and wellness content from our medical community."}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"post-list",children:n})]})}),k=n(9),y=(n(45),function(e){var t=e.loading,n=Object(i.useContext)(l),c=n.login,r=n.loggedIn,d=Object(i.useState)(null),b=Object(o.a)(d,2),m=b[0],O=b[1],f=Object(i.useState)({email:"",password:""}),h=Object(o.a)(f,2),p=h[0],x=h[1],v=Object(a.n)(),g=p.email,C=p.password;Object(i.useEffect)((function(){return!t&&r&&v("/"),function(){O(null)}}),[t,r,v]);var N=function(e){x(Object(j.a)(Object(j.a)({},p),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)("div",{className:"login-form",children:[Object(u.jsx)("h2",{children:"Log In"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,password:C})}).then((function(e){e.ok?e.json().then((function(e){c(e),O(null),v("/")})):e.json().then((function(e){O(e.error)}))}))},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(u.jsx)("input",{type:"email",onChange:N,value:g,name:"email",id:"email",autoComplete:"on"})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(u.jsx)("input",{type:"password",onChange:N,value:C,name:"password",id:"password",autoComplete:"on"})]}),Object(u.jsx)("button",{type:"submit",children:"Log In"})]}),m&&Object(u.jsx)("div",{className:"error-container",children:m}),Object(u.jsx)("br",{}),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("small",{children:[Object(u.jsxs)("b",{children:["Don't have an account? ","   "]}),Object(u.jsx)("u",{children:Object(u.jsx)(s.c,{to:"/signup",children:"Sign up"})})]})})]})}),A=(n(46),function(){var e=Object(i.useContext)(l),t=e.login,n=e.setCurrentUser,c=e.addUser,r=Object(i.useContext)(g).setErrors,d=Object(a.n)();Object(i.useEffect)((function(){return function(){r([])}}),[r]);var b=Object(i.useState)({username:"",email:"",password:"",passwordConfirmation:""}),m=Object(o.a)(b,2),O=m[0],f=m[1],h=O.username,p=O.email,x=O.password,v=O.passwordConfirmation,C=function(e){f(Object(j.a)(Object(j.a)({},O),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)("div",{className:"signup-form",children:[Object(u.jsx)("h2",{children:"Create Account"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,email:p,password:x,passwordConfirmation:v})}).then((function(e){return e.json()})).then((function(e){e.errors?r(e.errors):(t(e),n(e),c(e),d("/"))}))},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(u.jsx)("input",{type:"text",onChange:C,value:h,name:"username",id:"username",autoComplete:"off"})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(u.jsx)("input",{type:"email",onChange:C,value:p,name:"email",id:"email",autoComplete:"off"})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(u.jsx)("input",{type:"password",name:"password",id:"password",onChange:C,value:x,autoComplete:"off"})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"passwordConfirmation",children:"Confirm Password:"}),Object(u.jsx)("input",{type:"password",name:"passwordConfirmation",id:"passwordConfirmation",onChange:C,value:v,autoComplete:"on"})]}),Object(u.jsx)("button",{type:"submit",children:"Sign Up"})]}),Object(u.jsx)("br",{}),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("small",{children:[Object(u.jsxs)("b",{children:["Already have an account? ","   "]}),Object(u.jsx)("u",{children:Object(u.jsx)(s.c,{to:"/login",children:"Log in"})})]})})]})}),P=(n(47),function(e){var t=e.loading,n=Object(i.useContext)(l).loggedIn,c=Object(i.useContext)(f),s=c.posts,o=c.deletePost,r=Object(i.useContext)(g).setErrors,j=Object(a.n)();Object(i.useEffect)((function(){t||n||j("/login"),r([])}),[t,n,j,r]);var d=s&&s.map((function(e){return Object(u.jsx)(v,{post:e,deletePost:o},e.id)}));return s?Object(u.jsxs)("div",{className:"post-list-container",children:[Object(u.jsx)("h2",{children:"Posts "}),Object(u.jsx)("div",{className:"post-list",children:d})]}):Object(u.jsx)(m,{})}),S=(n(48),function(e){var t=e.post_id,n=Object(i.useContext)(l).currentUser,c=Object(i.useContext)(f).addComment,a=Object(i.useContext)(g).setErrors,r=Object(i.useState)(""),j=Object(o.a)(r,2),d=j[0],b=j[1];Object(i.useEffect)((function(){a([])}),[a]);var m=n?n.id:null,O=n?n.username:"";return Object(u.jsxs)("div",{className:"comment-form-container",children:[Object(u.jsxs)("p",{className:"comment-form-header",children:["Comment as"," ",Object(u.jsxs)(s.c,{to:"/users/".concat(m),children:["u/",O]})]}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/posts/".concat(t,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:d,post_id:t})}).then((function(e){e.ok?e.json().then((function(e){c(e)})):e.json().then((function(e){a(["Comment must be between 1 and 280 characters."])}))})),b("")},className:"comment-form",children:[Object(u.jsx)("textarea",{id:"content",name:"content",value:d,onChange:function(e){b(e.target.value)},placeholder:"What are your thoughts?",className:"comment-input"}),Object(u.jsx)("button",{type:"submit",className:"comment-submit-btn",children:"Comment"})]})]})}),E=(n(49),n(50),function(e){var t,n=e.comment,c=e.onDelete,s=e.onEdit,a=Object(i.useState)(!1),r=Object(o.a)(a,2),j=r[0],d=r[1],b=Object(i.useState)(n.content),O=Object(o.a)(b,2),f=O[0],h=O[1],x=Object(i.useState)(!1),v=Object(o.a)(x,2),g=v[0],C=v[1],N=Object(i.useContext)(l).currentUser;if(!n||!n.user||!n.user.id)return Object(u.jsx)(m,{});var k=n.user?n.user.username:"",y=n.id||"",A=(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.id)===(null===N||void 0===N?void 0:N.id);return Object(u.jsxs)("div",{className:"comment-card ".concat(A?"owner":""),children:[Object(u.jsx)(p,{username:k,createdAt:n.created_at}),A&&Object(u.jsxs)("div",{className:"comment-menu",children:[Object(u.jsx)("button",{className:"menu-button",onClick:function(){C(!g)},children:Object(u.jsx)("b",{children:"\u22ee"})}),g&&Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){d(!0),h(n.content)},children:"Edit"}),Object(u.jsx)("button",{onClick:function(){c(y)},children:"Delete"})]})]}),j?Object(u.jsxs)("div",{children:[Object(u.jsx)("textarea",{className:"comment-textarea",id:"editedContent",name:"editedContent",value:f,onChange:function(e){return h(e.target.value)}}),Object(u.jsxs)("div",{className:"comment-buttons",children:[Object(u.jsx)("button",{onClick:function(){s(y,f),d(!1)},children:"Save"}),Object(u.jsx)("button",{className:"cancel",onClick:function(){d(!1)},children:"Cancel"})]})]}):Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:n.content})})]})}),w=(n(51),n(26)),U=n(25),I=function(e){var t=e.post,n=e.username,c=Object(i.useContext)(f),s=c.updatePostLikesCount,a=c.updatePostUnlikesCount,r=Object(i.useState)((null===t||void 0===t?void 0:t.liked)||!1),j=Object(o.a)(r,2),l=j[0],d=j[1],b=Object(i.useState)(!1),m=Object(o.a)(b,2),O=m[0],h=m[1];return Object(u.jsxs)("div",{className:"like-count ".concat(l?"liked":""),onClick:function(){if(!O){h(!0);var e=l?"/posts/".concat(t.id,"/likes/").concat(t.like_id):"/posts/".concat(t.id,"/likes");fetch(e,{method:l?"DELETE":"POST",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((function(e){l?a(t.id,e.likes_count,n):s(t.id,e.likes_count,n),d(!l)})).catch((function(e){console.error(e)})).finally((function(){h(!1)}))}},children:[Object(u.jsx)(w.a,{icon:U.b,className:"thumbs-up-icon"}),l?"Liked":"Like",": ",null===t||void 0===t?void 0:t.likes_count]})},T=function(e){var t=e.loading,n=Object(i.useContext)(f),c=n.posts,d=n.setPosts,b=Object(i.useContext)(l),O=b.currentUser,h=b.setCurrentUser,p=b.loggedIn,v=Object(a.p)().id,g=parseInt(v),C=Object(i.useState)(null),N=Object(o.a)(C,2),k=N[0],y=N[1],A=Object(a.n)(),P=((null===k||void 0===k?void 0:k.comments)||[]).length,w=1===P?"comment":"comments";Object(i.useEffect)((function(){t||p||A("/login");var e=c.find((function(e){return e.id===g}));y(e)}),[O,t,p,A,g,c]);var U=function(e,t){fetch("/posts/".concat(k.id,"/comments/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})}).then((function(e){return e.json()})).then((function(t){var n=Object(j.a)(Object(j.a)({},k),{},{comments:k.comments.map((function(n){return n.id===e?t:n}))}),s=c.map((function(e){return e.id===g?n:e}));d(s)}))},T=function(e){fetch("/comments/".concat(e),{method:"DELETE"}).then((function(t){if(t.ok){var n=k.comments.filter((function(t){return t.id!==e})),s=Object(j.a)(Object(j.a)({},k),{},{comments:n}),o=c.map((function(e){return e.id===g?s:e}));d(o)}}))},L=k&&k.comments.map((function(e){return Object(u.jsx)("div",{className:"comment-card",children:e&&Object(u.jsx)(E,{comment:e,onEdit:U,onDelete:T,currentUser:O},e.id)},e.id)}));return t||!k?Object(u.jsx)(m,{}):Object(u.jsxs)("div",{className:"post-details-container",children:[Object(u.jsx)("h1",{className:"post-header",children:k.title}),Object(u.jsxs)("p",{className:"post-author",children:["Posted by"," ",Object(u.jsxs)(s.c,{to:"/users/".concat(k.user.id),children:["u/",k.user.username]})]}),Object(u.jsx)("p",{className:"post-content",children:k.content}),Object(u.jsxs)("div",{className:"counts-container",children:[Object(u.jsxs)("p",{className:"comment-count",children:[Object(u.jsx)("img",{src:x,alt:"Comment Icon",className:"comment-icon"})," ",P," ",w]}),O&&Object(u.jsx)(I,{post:k,username:O.username})]}),Object(u.jsx)(S,{onSubmit:function(e){fetch("/posts/".concat(g,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})}).then((function(e){return e.json()})).then((function(e){var t=Object(j.a)(Object(j.a)({},k),{},{comments:[e].concat(Object(r.a)(k.comments))}),n=c.map((function(e){return e.id===g?t:e}));d(n);var s=Object(j.a)(Object(j.a)({},O),{},{comments:[].concat(Object(r.a)(O.comments),[e])});h(s)}))},post_id:k.id}),Object(u.jsx)("ul",{className:"comments-list",children:L})]})},L=n(6),D=n(11),B=(n(54),function(e){var t=e.id,n=e.summary;return Object(u.jsx)("div",{className:"miniature-post-card",children:Object(u.jsx)(s.b,{to:"/posts/".concat(t),children:n})})}),F=(n(55),function(e){var t=e.loading,n=Object(i.useContext)(l),c=n.currentUser,s=n.loggedIn,r=n.userImage,j=n.updateUserProfilePicture,d=n.updateBio,b=Object(i.useContext)(f),O=b.posts,h=b.loadingPosts,p=b.updateUserPostProfilePicture,x=Object(i.useContext)(g).setErrors,v=Object(a.n)(),C=Object(i.useState)("posts"),N=Object(o.a)(C,2),k=N[0],y=N[1],A=Object(i.useState)([]),P=Object(o.a)(A,2),S=P[0],E=P[1],I=Object(i.useState)(!1),T=Object(o.a)(I,2),F=T[0],_=T[1],M=Object(i.useState)(!1),J=Object(o.a)(M,2),z=J[0],R=J[1],Y=Object(i.useState)(c.bio||""),K=Object(o.a)(Y,2),Q=K[0],G=K[1];return Object(i.useEffect)((function(){t||s||v("/login"),x([]);var e=O.filter((function(e){var t;return null===(t=e.likes)||void 0===t?void 0:t.some((function(e){return e&&e.user_id===c.id}))}));E(e)}),[t,s,v,x,h,c,O]),!t&&c&&c.posts?Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsxs)("div",{className:"main-content",children:[Object(u.jsxs)("div",{className:"tabs",children:[Object(u.jsx)("button",{className:"posts"===k?"active":"",onClick:function(){return y("posts")},children:"Posts"}),Object(u.jsx)("button",{className:"liked"===k?"active":"",onClick:function(){return y("liked")},children:"Liked"})]}),Object(u.jsxs)("div",{className:"miniature-post-cards",children:["posts"===k&&c.posts.map((function(e){return Object(u.jsx)(B,{id:e.id,summary:e.summary},e.id)})),"liked"===k&&S&&S.map((function(e){return Object(u.jsx)(B,{id:e.id,summary:e.summary},e.id)}))]})]}),Object(u.jsxs)("div",{className:"user-info-container",children:[Object(u.jsxs)("div",{className:"avatar",children:[Object(u.jsxs)("label",{htmlFor:"profile-picture-input",className:"profile-picture-label",children:[Object(u.jsx)("div",{className:"camera-icon",children:Object(u.jsx)(w.a,{icon:U.a,size:"sm"})}),Object(u.jsx)("img",{src:r||"https://placekitten.com/150/150",alt:"User Avatar",className:"profile-picture"})]}),Object(u.jsx)("input",{id:"profile-picture-input",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(t){var n=new FormData;n.append("image",t),_(!0),fetch("/me/update_image",{method:"PUT",body:n}).then((function(e){return e.json()})).then(function(){var e=Object(D.a)(Object(L.a)().mark((function e(t){return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t.image);case 2:return e.next=4,p(t.image,c);case 4:_(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},style:{display:"none"},disabled:F}),F&&Object(u.jsx)(m,{})]}),Object(u.jsxs)("div",{className:"details",children:[Object(u.jsx)("h3",{children:c.username}),Object(u.jsx)("p",{children:Object(u.jsx)("i",{children:c.email})})]}),Object(u.jsxs)("div",{className:"bio",children:[Object(u.jsx)("br",{}),z?Object(u.jsxs)("form",{className:"bio-form",children:[Object(u.jsx)("textarea",{className:"bio-textarea",value:Q,onChange:function(e){return G(e.target.value)},placeholder:"Enter your new bio..."}),Object(u.jsxs)("div",{className:"button-group",children:[Object(u.jsx)("button",{className:"small-button",type:"button",onClick:function(){fetch("/me/update_bio",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bio:Q})}).then((function(e){return e.json()})).then((function(e){d(e.bio),R(!1)})).catch((function(e){console.error("Error updating bio:",e)}))},children:"Save"}),Object(u.jsx)("button",{className:"small-button",type:"button",onClick:function(){return R(!1)},children:"Cancel"})]})]}):Object(u.jsxs)("p",{children:[c.bio||"No bio available."," ",Object(u.jsx)("button",{className:"small-button",onClick:function(){return R(!0)},children:"Edit Bio"})]})]})]})]}):Object(u.jsx)(m,{})}),_=(n(56),function(){return Object(u.jsxs)("div",{className:"not-found",children:[Object(u.jsx)("h2",{children:"404 - Not Found"}),Object(u.jsx)("p",{children:"The page you are looking for does not exist."})]})}),M=(n(57),{title:"",content:""}),J=function(){var e=Object(i.useContext)(l),t=e.loggedIn,n=e.updateUserAddPost,c=Object(i.useContext)(g).setErrors,s=Object(i.useContext)(f).addPost,r=Object(i.useState)(M),d=Object(o.a)(r,2),b=d[0],m=d[1],O=Object(a.n)();Object(i.useEffect)((function(){c([])}),[c]);var h=function(e){var t=e.target,n=t.name,c=t.value;m(Object(j.a)(Object(j.a)({},b),{},Object(k.a)({},n,c)))};return Object(u.jsxs)("div",{className:"post-form-container",children:[Object(u.jsx)("h2",{children:"Create a New Post"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t?fetch("/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((function(e){e.ok?e.json().then((function(e){s(e),n(e),O("/posts")})):e.json().then((function(e){c(e.errors)}))})):O("/login")},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(u.jsx)("input",{type:"text",id:"title",name:"title",value:b.title,onChange:h,required:!0})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"content",children:"Content:"}),Object(u.jsx)("textarea",{id:"content",name:"content",value:b.content,onChange:h,rows:"6",required:!0})]}),Object(u.jsx)("button",{type:"submit",children:"Submit"})]})]})},z=(n(58),function(){var e=Object(i.useContext)(g),t=e.errors,n=e.setErrors;Object(i.useEffect)((function(){n([])}),[n]);var c=t&&t.map((function(e,t){return Object(u.jsx)("li",{children:e},t)}));return Object(u.jsx)("div",{className:"errors-container",children:Object(u.jsx)("ul",{className:"errors-list",children:c})})}),R=(n(59),function(e){var t=e.comments;return Object(u.jsx)("ul",{className:"comments-list",children:t.map((function(e){return Object(u.jsx)("li",{className:"comment-card",children:Object(u.jsxs)("p",{className:"comment-text",children:["Comment by"," ",Object(u.jsx)(s.c,{to:"/profile/".concat(e.user.id),className:"user-link",children:e.user.username}),": ",e.text]})},e.id)}))})}),Y=(n(60),{title:"",content:""}),K=function(e){var t=e.loading,n=Object(i.useContext)(l),c=n.loggedIn,s=n.currentUser,r=n.updateUserEditPost,d=Object(i.useContext)(f),b=d.posts,O=d.editPost,h=Object(i.useState)(Object(j.a)({},Y)),x=Object(o.a)(h,2),v=x[0],g=x[1],C=Object(a.p)().id,N=parseInt(C,10),y=Object(a.n)();Object(i.useEffect)((function(){if(!t&&!c)return y("/login");if(b.length>0){var e=b.find((function(e){return e.id===N}));if(e.user.id!==s.id)return y("/posts/".concat(N));g({title:e.title,content:e.content})}}),[b,c,s,C,y,t,N]);var A=function(e){var t=e.target,n=t.name,c=t.value;g((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(k.a)({},n,c))}))},P=b.find((function(e){return e.id===parseInt(C,10)})),S=new Date(null===P||void 0===P?void 0:P.created_at).toLocaleString();return 0===b.length?Object(u.jsx)(m,{}):Object(u.jsxs)("div",{className:"post-edit-container",children:[Object(u.jsx)(p,{username:s.username,createdAt:S}),Object(u.jsxs)("form",{className:"post-edit-form",onSubmit:function(e){e.preventDefault(),fetch("/posts/".concat(N),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}).then((function(e){e.ok&&e.json().then((function(e){O(e),r(e),y("/posts/".concat(C))}))}))},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Title"}),Object(u.jsx)("input",{type:"text",name:"title",value:v.title,onChange:A,autoComplete:"on"})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"content",children:"Content"}),Object(u.jsx)("textarea",{className:"content-box",type:"text",name:"content",value:v.content,onChange:A,autoComplete:"on"})]}),Object(u.jsxs)("div",{className:"button-group",children:[Object(u.jsx)("input",{type:"submit",value:"Update Post"}),Object(u.jsx)("button",{type:"button",onClick:function(){y("/posts/".concat(N))},children:"Cancel"})]})]})]})},Q=function(e){var t=e.loading,n=Object(a.n)(),c=Object(i.useContext)(l),o=c.users,r=c.loggedIn,j=Object(i.useContext)(g).setErrors;Object(i.useEffect)((function(){t||r||n("/login"),j([])}),[t,r,n,j]);var d=o&&o.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{to:"/users/".concat(e.id),children:e.username})},e.id)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"User List"}),Object(u.jsx)("ul",{children:d})]})},G=(n(61),function(e){var t=e.loading,n=Object(a.n)(),c=Object(i.useContext)(l),s=c.users,r=c.loggedIn,j=c.currentUser,d=Object(i.useContext)(f).posts,b=Object(a.p)().id,O=parseInt(b),h=Object(i.useState)("posts"),p=Object(o.a)(h,2),x=p[0],v=p[1],g=Object(i.useState)(""),C=Object(o.a)(g,2),N=C[0],k=C[1];if(Object(i.useEffect)((function(){r&&j.id===O&&n("/me");var e=null===s||void 0===s?void 0:s.find((function(e){return e.id===O}));e&&k(e.image||"")}),[j.id,r,n,O,s]),t&&!s)return Object(u.jsx)(m,{});var y=null===s||void 0===s?void 0:s.find((function(e){return e.id===O}));if(t)return Object(u.jsx)(m,{});var A=d.filter((function(e){return e.user.id===O})),P=d.filter((function(e){var t;return e.likes.some((function(e){return(null===e||void 0===e?void 0:e.user_id)===O}))&&(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)!==O})),S=function(e){v(e)};return Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsxs)("div",{className:"main-content",children:[Object(u.jsxs)("div",{className:"tabs",children:[Object(u.jsx)("button",{className:"posts"===x?"active":"",onClick:function(){return S("posts")},children:"Posts"}),Object(u.jsx)("button",{className:"liked"===x?"active":"",onClick:function(){return S("liked")},children:"Liked Posts"})]}),Object(u.jsxs)("div",{className:"miniature-post-cards",children:["posts"===x&&A.map((function(e){return Object(u.jsx)(B,{id:e.id,summary:e.summary,image:e.image},e.id)})),"liked"===x&&P.map((function(e){return Object(u.jsx)(B,{id:e.id,summary:e.summary,image:e.image},e.id)}))]})]}),Object(u.jsxs)("div",{className:"user-info-container",children:[Object(u.jsx)("div",{className:"avatar",children:Object(u.jsx)("img",{src:N||"https://placekitten.com/150/150",alt:"User Avatar"})}),Object(u.jsxs)("div",{className:"details",children:[Object(u.jsx)("h3",{children:null===y||void 0===y?void 0:y.username}),Object(u.jsx)("p",{children:Object(u.jsx)("i",{children:null===y||void 0===y?void 0:y.email})}),Object(u.jsx)("div",{className:"bio",children:Object(u.jsx)("p",{children:(null===y||void 0===y?void 0:y.bio)||"No bio available."})})]})]})]})}),H=function(){return Object(u.jsx)("div",{children:"PostLikes"})};var X=function(){var e=Object(i.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(u.jsx)(C,{children:Object(u.jsx)(d,{setLoading:c,children:Object(u.jsxs)(h,{children:[Object(u.jsx)(O,{}),Object(u.jsx)(z,{}),n?Object(u.jsx)("h1",{children:"Loading..."}):Object(u.jsxs)(a.c,{children:[Object(u.jsx)(a.a,{path:"/",element:Object(u.jsx)(N,{})}),Object(u.jsx)(a.a,{path:"/me",element:Object(u.jsx)(F,{loading:n})}),Object(u.jsx)(a.a,{path:"/users/*",element:Object(u.jsx)(Q,{loading:n})}),Object(u.jsx)(a.a,{exact:!0,path:"/users/:id",element:Object(u.jsx)(G,{loading:n})}),Object(u.jsx)(a.a,{path:"/posts",element:Object(u.jsx)(P,{loading:n})}),Object(u.jsx)(a.a,{path:"/posts/new",element:Object(u.jsx)(J,{loading:n})}),Object(u.jsx)(a.a,{path:"/posts/:id/edit",element:Object(u.jsx)(K,{loading:n})}),Object(u.jsx)(a.a,{path:"/posts/:id",element:Object(u.jsx)(T,{loading:n})}),Object(u.jsx)(a.a,{path:"/posts/:postId/likes",element:Object(u.jsx)(H,{})}),Object(u.jsx)(a.a,{path:"/posts/:post_id/comments",element:Object(u.jsx)(R,{})}),Object(u.jsx)(a.a,{path:"/comments/:id",element:Object(u.jsx)(E,{})}),Object(u.jsx)(a.a,{path:"/login",element:Object(u.jsx)(y,{loading:n})}),Object(u.jsx)(a.a,{path:"/signup",element:Object(u.jsx)(A,{loading:n})}),Object(u.jsx)(a.a,{path:"*",element:Object(u.jsx)(_,{})})]})]})})})},V=document.getElementById("root");Object(c.createRoot)(V).render(Object(u.jsx)(s.a,{children:Object(u.jsx)(X,{})}))}]),[[62,1,2]]]);
//# sourceMappingURL=main.f8063429.chunk.js.map